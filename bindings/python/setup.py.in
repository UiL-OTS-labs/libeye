#!/usr/bin/env python

#
# Note this file is generated by CMake.
# if you want to change anything change the setup.py.in in
# ${CMAKE_SOURCE_DIR}/bindings/python .
#

import os
os.environ["CC"] = "g++"
# the distutils don't appear to examine the CXX variable but just use
# CC for all compilers.
#os.environ["CXX"] = "g++"
from distutils.core import setup, Extension


module_name = 'pyeye'

# add new sourcefiles to the source_files list.
source_files= [ "pyeye.cpp"]

# we assume that all source files are in the current source dir.
source_files= [ "${CMAKE_CURRENT_SOURCE_DIR}/" + i for i in source_files]

# these are the paths to include to build the extension (ugly change this).
include_dirs = ["${CMAKE_SOURCE_DIR}",
                "${CMAKE_BINARY_DIR}/log",
                "${CMAKE_BINARY_DIR}"
                ]

libs =      ["${EYELOG_SHARED_LIB}"]
lib_dirs =  ["${CMAKE_BINARY_DIR}/log"]

extra_compile_args = []
if os.environ["CC"] == "g++":
    extra_compile_args += ["-std=c++11", "-fpermissive"]


# this is our custom extension.
pyeye_module = Extension(module_name,
                         sources=source_files,
                         language="c++",
                         include_dirs=include_dirs,
                         extra_compile_args=extra_compile_args,
                         libraries=libs,
                         library_dirs=lib_dirs
                         )

# finally call setup to run all the stuff for this module.
setup(  name=module_name,
        version="${LIBEYE_VERSION_MAJOR}.${LIBEYE_VERSION_MINOR}",
        ext_modules = [pyeye_module]
        )
